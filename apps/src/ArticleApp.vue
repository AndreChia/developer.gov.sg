<template>
    <div id="article-editor-app">
        <a class="sgds-button is-rounded" @click="openEditor">Edit This Page</a>
    </div>
</template>

<script>
import sanitizeHtml from "sanitize-html";
import ArticleEditor from "./ArticleEditor.vue";

export default {
    props: {
        title: {
            // From front matter
            type: String,
            requred: true
        },
        layout: {
            // From front matter
            type: String,
            required: true
        },
        category: {
            // From front matter
            type: String,
            required: true
        },
        description: {
            // From front matter
            type: String,
        },
        url: {
            // Generated by Jekyll, should map to actual file path
            type: String,
            required: true
        },
        content: {
            // From Jekyll render. HTML.
            type: String,
            required: true
        }
    },
    data() {
        return {
            page_content: null
        };
    },
    methods: {
        openEditor() {
            this.$modal.show(
                ArticleEditor,
                {
                    page_title: this.title,
                    page_layout: this.layout,
                    page_category: this.category,
                    page_description: this.description,
                    page_path: this.url,
                    page_content: sanitizeHtml(this.content),
                },
                {
                    clickToClose: false,
                    width: "70%",
                    height: "auto",
                    minWidth: 250,
                    minHeight: 400,
                    scrollable: true
                }
            );
        }
    }
};
</script>
<!-- app -->
<div id="edit-app">
  <a id="show-modal" class="sgds-button is-primary is-large pull-right" @click="editClick('{{page.title}}')">Edit</a>

  <!-- use the modal component, pass in the prop -->
  <modal v-if="showModal" @close="showModal = false" v-bind:content="content" @submit="submitForm">
    <h3 slot="header">(( pageTitle ))</h3>
  </modal>
</div>

<!-- template for the modal component -->
<script type="text/x-template" id="modal-template">
  <transition name="modal">
    <div class="modal-mask">
      <div class="modal-wrapper">
        <div class="modal-container">

          <div class="modal-header">
            <slot name="header">
              Edit Page
            </slot>
          </div>

          <div class="modal-body">
            <slot name="body">
                <div id="editor">
                    <span v-html="content"></span>
                  </div>
            </slot>
          </div>

          <div class="modal-footer">
            <slot name="footer">
              <a id="show-modal" class="modal-default-button sgds-button is-secondary" @click="$emit('close')">Cancel</a>
              <a id="show-modal" class="modal-default-button sgds-button is-primary"  @click="$emit('submit')">Submit</a>
            </slot>
          </div>
        </div>
      </div>
    </div>
  </transition>
</script>

<form id="edit-form" name="edit-form" method="POST" data-netlify="true" data-netlify-honeypot="honeypot-field" hidden>
  <input id="page_path" name="page_path" class="input" type="text" />
  <input id="page_title" name="page_title" class="input" type="text" />
  <input id="page_content" name="page_content" class="input" type="text" />
  <input id="form_name" name="form_name" class="input" type="text" />
  <span><button id="edit-form-button" class="sgds-button default" type="submit">Submit</button></span>
</form>
<!-- Hidden mirrored form for netlify to detect fields -->
<form hidden name="edit-form" method="POST" data-netlify="true" data-netlify-honeypot="honeypot-field">
  <input name="page_path" />
  <input name="page_title" />
  <input name="page_content" />
  <input name="form_name" />
  <input type="hidden" name="honeypot-field" />
</form>


<script src="/assets/js/edit-content.js" type="text/javascript"></script>